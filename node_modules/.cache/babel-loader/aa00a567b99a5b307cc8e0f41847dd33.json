{"ast":null,"code":"/**\n * Work around Safari 14 IndexedDB open bug.\n *\n * Safari has a horrible bug where IDB requests can hang while the browser is starting up. https://bugs.webkit.org/show_bug.cgi?id=226547\n * The only solution is to keep nudging it until it's awake.\n */\nfunction idbReady() {\n  var isSafari = !navigator.userAgentData && /Safari\\//.test(navigator.userAgent) && !/Chrom(e|ium)\\//.test(navigator.userAgent); // No point putting other browsers or older versions of Safari through this mess.\n\n  if (!isSafari || !indexedDB.databases) return Promise.resolve();\n  var intervalId;\n  return new Promise(function (resolve) {\n    var tryIdb = function () {\n      return indexedDB.databases().finally(resolve);\n    };\n\n    intervalId = setInterval(tryIdb, 100);\n    tryIdb();\n  }).finally(function () {\n    return clearInterval(intervalId);\n  });\n}\n\nexport default idbReady;","map":{"version":3,"sources":["/home/varun/Documents/React/todo-list/node_modules/safari-14-idb-fix/dist/index.js"],"names":["idbReady","isSafari","navigator","userAgentData","test","userAgent","indexedDB","databases","Promise","resolve","intervalId","tryIdb","finally","setInterval","clearInterval"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,QAAT,GAAoB;AAChB,MAAIC,QAAQ,GAAG,CAACC,SAAS,CAACC,aAAX,IACX,WAAWC,IAAX,CAAgBF,SAAS,CAACG,SAA1B,CADW,IAEX,CAAC,iBAAiBD,IAAjB,CAAsBF,SAAS,CAACG,SAAhC,CAFL,CADgB,CAIhB;;AACA,MAAI,CAACJ,QAAD,IAAa,CAACK,SAAS,CAACC,SAA5B,EACI,OAAOC,OAAO,CAACC,OAAR,EAAP;AACJ,MAAIC,UAAJ;AACA,SAAO,IAAIF,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AAClC,QAAIE,MAAM,GAAG,YAAY;AAAE,aAAOL,SAAS,CAACC,SAAV,GAAsBK,OAAtB,CAA8BH,OAA9B,CAAP;AAAgD,KAA3E;;AACAC,IAAAA,UAAU,GAAGG,WAAW,CAACF,MAAD,EAAS,GAAT,CAAxB;AACAA,IAAAA,MAAM;AACT,GAJM,EAIJC,OAJI,CAII,YAAY;AAAE,WAAOE,aAAa,CAACJ,UAAD,CAApB;AAAmC,GAJrD,CAAP;AAKH;;AAED,eAAeV,QAAf","sourcesContent":["/**\n * Work around Safari 14 IndexedDB open bug.\n *\n * Safari has a horrible bug where IDB requests can hang while the browser is starting up. https://bugs.webkit.org/show_bug.cgi?id=226547\n * The only solution is to keep nudging it until it's awake.\n */\nfunction idbReady() {\n    var isSafari = !navigator.userAgentData &&\n        /Safari\\//.test(navigator.userAgent) &&\n        !/Chrom(e|ium)\\//.test(navigator.userAgent);\n    // No point putting other browsers or older versions of Safari through this mess.\n    if (!isSafari || !indexedDB.databases)\n        return Promise.resolve();\n    var intervalId;\n    return new Promise(function (resolve) {\n        var tryIdb = function () { return indexedDB.databases().finally(resolve); };\n        intervalId = setInterval(tryIdb, 100);\n        tryIdb();\n    }).finally(function () { return clearInterval(intervalId); });\n}\n\nexport default idbReady;\n"]},"metadata":{},"sourceType":"module"}